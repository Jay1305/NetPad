<import from="./package-metadata.html"></import>

<input class="form-control"
       type="text"
       placeholder="Search packages..."
       value.bind="term & debounce:400"/>

<hr/>

<div class="list-group"
     style="flex: 1 1 auto; overflow-y: auto; min-height: 100px; max-height: 500px"
     if.bind="!!term">
    <div class="list-group-item d-flex flex-row"
         repeat.for="package of searchResults">
        <package-metadata class="flex-grow-1" metadata.bind="package"></package-metadata>
        <small class="d-flex align-items-center justify-content-center" style="flex: 0 0 100px">
            <a href="" click.trigger="addPackage(package)" show.bind="package.existsInLocalCache">Add</a>
            <a href="" click.trigger="downloadPackage(package)" show.bind="!package.existsInLocalCache">Download</a>
        </small>
    </div>
</div>
<div else class="list-group">
    <div class="list-group-item d-flex flex-row"
         repeat.for="package of cachedPackages">
        <div class="flex-grow-1" if.bind="package.packageMetadata">
            <package-metadata metadata.bind="package.packageMetadata"></package-metadata>
            <b>Cached in:</b> ${package.directoryPath}<br/>
            <b>Cached versions:</b> ${package.versions}
        </div>
        <div else>
            <h5>
                ${package.packageId}
            </h5>
            <p>
                <b>Path:</b> ${package.directoryPath} <br/>
                <b>Versions:</b> ${package.versions.length === 1 ? package.versions : (package.versions[0] + '-' + package.versions[package.versions.length - 1])}
            </p>
        </div>
        <small class="d-flex align-items-center justify-content-center" style="flex: 0 0 100px">
            <a href="" click.trigger="deleteFromCache(package)">Delete from cache</a>
        </small>
    </div>
</div>
